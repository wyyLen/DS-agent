# DSAgent 快速启动指南 - 阿里云配置

## 🎉 配置已完成！

所有配置文件已设置为使用阿里云通义千问大模型。

## 📋 配置清单

✅ **主配置文件**: `config/config2.yaml`  
✅ **DS Agent主模型**: `config/gpt-4o.yaml`  
✅ **DS Agent辅助模型**: `config/gpt-4o-mini.yaml`  
✅ **使用模型**: qwen-plus-2025-12-01  
✅ **嵌入模型**: text-embedding-v4  
✅ **API密钥**: 已配置

## 🚀 快速启动

### 1. 验证配置（推荐）
```bash
python verify_config.py
```

### 2. 启动后端API服务
打开第一个终端：
```bash
cd examples\ds_agent\agent_service
python api_service_provider.py
```

**等待看到**: `INFO: Uvicorn running on http://0.0.0.0:8000`

### 3. 启动前端界面
打开第二个终端：
```bash
cd DSassistant
python main.py
```

**等待看到**: `Running on local URL:  http://localhost:7860`

### 4. 访问应用
在浏览器打开：**http://localhost:7860**

## 🧪 测试API连接（可选）

如果遇到问题，可以先测试API连接：
```bash
python test_dashscope_api.py
```

这将测试：
- ✅ LLM模型是否能正常调用
- ✅ 嵌入模型是否能正常工作
- ✅ API密钥是否有效

## 📝 使用说明

### 支持的功能
- 📊 数据分析任务规划与执行
- 🔍 深度探索模式（树搜索）
- 🤖 动态工具调用
- 📂 文件上传与分析
- 💬 流式对话响应

### 三种工作模式

1. **规划执行模式** (默认)
   - 适合标准数据分析任务
   - 自动规划和执行分析步骤

2. **深度探索模式**
   - 适合复杂问题
   - 使用树搜索策略探索解决方案

3. **动态调用模式**
   - 灵活的工具调用
   - 适合需要多步骤交互的任务

## ⚠️ 注意事项

### 首次启动可能需要：
1. **下载模型数据**：首次运行可能需要下载经验库等数据
2. **初始化知识库**：RAG系统需要加载知识库
3. **网络连接**：确保能访问阿里云API

### 常见端口
- **后端API**: http://localhost:8000
- **前端界面**: http://localhost:7860

### 如果端口被占用
修改以下文件：
- 后端端口：`examples/ds_agent/agent_service/api_service_provider.py` 最后几行
- 前端端口：`DSassistant/config.py` 中的 `SERVER_PORT`

## 🐛 故障排除

### 问题1: 导入错误
```
ImportError: cannot import name 'Url' from 'pydantic.networks'
```
**解决**: 这是已知的依赖兼容性问题，不影响服务运行

### 问题2: API调用失败
**检查**:
1. API密钥是否正确
2. 网络是否能访问阿里云
3. 账户是否有模型访问权限

### 问题3: 服务启动失败
**检查**:
1. Python版本是否 >= 3.9
2. 是否安装了所有依赖：`pip install -r requirements.txt`
3. 配置文件是否存在：运行 `python verify_config.py`

## 📚 更多信息

- **完整配置说明**: 查看 `配置说明_阿里云.md`
- **配置总结**: 查看 `配置完成总结.md`
- **项目文档**: 查看 `docs/` 目录
- **快速开始**: 查看 `quick_start.md`

## 💡 提示

### 提高响应速度
- 使用 `qwen-turbo` 模型（修改配置文件中的model字段）

### 提高回答质量
- 使用 `qwen-max` 模型（需要更高的API配额）

### 节省成本
- 当前使用的 `qwen-plus` 已经是平衡选择

## 🎯 下一步

1. ✅ 验证配置：`python verify_config.py`
2. ✅ 启动后端服务
3. ✅ 启动前端服务
4. ✅ 开始使用数据分析智能体！

---

**祝使用愉快！** 🚀

如有问题，请查看详细文档或检查日志输出。
